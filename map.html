<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Карта</title>
  <link rel="stylesheet" href="map.css">
</head>
<body>
  <button class="back-button zaza" onclick="history.back()">⟵</button>
  
  <div class="timeline">
    <div class="timeline-node" data-target="five">9 фев 1904</div>
    <div class="timeline-node" data-target="two">1 мая 1904</div>
    <div class="timeline-node" data-target="three">14-15 июн 1904</div>
    <div class="timeline-node" data-target="four">25 мая - 8 июл 1904</div>
    <div class="timeline-node" data-target="seven">14 авг 1904</div>
    <div class="timeline-node" data-target="eight">24-26 авг 1904</div>
    <div class="timeline-node" data-target="one">30 авг - 3 сен 1904</div>
    <div class="timeline-node" data-target="six">27-28 мая 1905</div>
  </div>

  <div class="container">    
    <div class="map">
      <div class="plane" data-info="one" style="top: 17%; left: 45%;"></div>
      <div class="plane" data-info="eight" style="top: 19%; left: 43%;"></div>
      <div class="plane" data-info="two" style="top: 20%; left: 49%;"></div>
      <div class="plane" data-info="three" style="top: 22%; left: 41.5%;"></div>
      <div class="plane" data-info="four" style="top: 26%; left: 40%;"></div>
      <div class="plane" data-info="five" style="top: 38%; left: 53%;"></div>
      <div class="plane" data-info="six" style="top: 48%; left: 59%;"></div>
      <div class="plane" data-info="seven" style="top: 45%; left: 60%;"></div>
    </div>

    <div id="infoPanel" class="side-panel">
      <button class="close-panel">&times;</button>
      <h1 id="panelTitle">Заголовок</h1>
      <p id="panelContent">Текст...</p>
    </div>
  </div>

  <script src="script.js"></script>
<script> 
  const planes = document.querySelectorAll('.plane');
const infoPanel = document.getElementById('infoPanel');
const panelTitle = document.getElementById('panelTitle');
const panelContent = document.getElementById('panelContent');
const closePanelBtn = document.querySelector('.close-panel');
const timelineNodes = document.querySelectorAll('.timeline-node');

const infoDatabase = {
  one: {
    title: "Ляоянское сражение.",
    content: "ДДата: с 30 августа по 3 сентября 1904 года. Место: Ляонян. Ляоянское сражение, происходившее с 30 августа по 3 сентября 1904 года, стало одним из ключевых сражений Русско-японской войны (1904-1905). Оно произошло в районе города Ляоян (современный Ляонин, Китай) и стало важным этапом в борьбе за контроль над Маньчжурией. Предыстория: Русско-японская война началась в феврале 1904 года и была вызвана конфликтом интересов России и Японии в Восточной Азии, особенно в Корее и Маньчжурии. После начальных успехов японских войск, русская армия начала сосредоточение своих сил для контрнаступления.  Ход сражения: Ляоянское сражение началось с того, что японские войска под командованием генерала Кавабаты начали наступление на позиции русских. Русская армия, возглавляемая генералом Алексей Куропаткиным, была вынуждена отступить к Ляояну. Сражение включало в себя ожесточенные бои, где обе стороны применяли артиллерию и пехоту. Японцы использовали свою тактику маневренной войны и превосходство в мобильности. В то же время русские войска пытались удержать свои позиции и организовать оборону. Несмотря на упорное сопротивление русских, японцы смогли добиться значительных успехов. Итоги: Сражение закончилось стратегической победой Японии. Русские войска были вынуждены отступить к Ляояну, что открыло японцам путь к дальнейшему наступлению на север. Это сражение продемонстрировало недостатки русской армии в организации и командовании, а также показало эффективность японской тактики. Ляоянское сражение стало важным шагом к окончательному поражению России в Русско-японской войне, которая завершилась подписанием Портсмутского мира в 1905 году. События этой войны оказали значительное влияние на внутреннюю политику России и способствовали росту революционных настроений в стране. "
  },
  two: {
    title: "Сражение на реке Ялу",
    content: "Дата: 1 мая, 1904 год. Место: Река Ялу. Бой на реке Ялу (или Ялу-цзян) произошел 1 мая 1904 года и стал одним из первых крупных сражений Русско-японской войны. Это сражение произошло в контексте боевых действий на территории Кореи и Маньчжурии. Предыстория: Конфликт между Россией и Японией начался в 1904 году из-за соперничества за влияние в Восточной Азии, особенно в Корее и Маньчжурии. Японские войска начали вторжение в Корею, а русские силы сосредоточились на границе с Маньчжурией. Ход сражения: Японцы использовали тактику маневра и сосредоточенного огня, что позволило им быстро продвигаться вперед. Русские войска оказали сопротивление, но были вынуждены отступить под давлением японских атак. Итог боя: Бой на реке Ялу завершился победой японских сил. Русская армия понесла значительные потери и была вынуждена отступить к своим основным позициям."
  },
  three: {
    title: "Сражение при Вафангоу.",
    content: "Дата: 14-15 июня, 1904 год. Место: Вафангоу. Предыстория: После начала Русско-японской войны в феврале 1904 года Япония начала активные действия против российских войск на Дальнем Востоке. Порт-Артур стал объектом японских атак, и для его защиты русские силы пытались удержать контроль над окружающими районами. Сражение: Сражение при Вафангоу началось 14 июня 1904 года. Японцы атаковали русские позиции с целью захвата высот и окружения гарнизона Порт-Артура. Русские войска, несмотря на численное превосходство японцев, проявили стойкость и организованность в обороне. Итоги сражения: Сражение при Вафангоу закончилось без решающей победы ни одной из сторон, однако японцы смогли добиться частичного успеха, заняв некоторые высоты и укрепив свои позиции вокруг Порт-Артура. Русские войска понесли значительные потери, но также продемонстрировали свою способность к сопротивлению."
  }, 
  four: {
    title: "Боевые действия на подступах к Порт-Артуру",
    content: "Дата: с 25 мая по 8 июля 1904 г. Место: Порт-Артур. Боевые действия на подступах к Порт-Артуру с 25 мая по 8 июля 1904 года стали важной частью Русско-японской войны и включали в себя ряд сражений, которые определили судьбу этой стратегически важной крепости. Предыстория: Порт-Артур, захваченный Россией в 1898 году, стал ключевой военно-морской базой на Дальнем Востоке. В начале 1904 года Япония начала военные действия против России, стремясь установить контроль над Кореей и Маньчжурией. Осада Порт-Артура: После успешных действий при Наншан японцы начали осаду Порт-Артура. Ситуация для русских войск становилась все более критической: они испытывали нехватку продовольствия и боеприпасов, а также страдали от постоянных артиллерийских обстрелов."
  },
  five: {
    title: "Чемульпинский морской бой.",
    content: "Дата: 9 февраля, 1904 год. Место: Чумульпо (в наше время Инчхон) Чемульпский бой — одно из ключевых сражений Русско-японской войны 1904–1905 годов, произошедшее 14 августа 1904 года (по старому стилю) близ Чемульпо (ныне Инчхон, Корея). Предыстория: Русская эскадра под командованием вице-адмирала Витгефта стояла в порту Чемульпо, ожидая подкреплений и готовясь к дальнейшим действиям на Дальнем Востоке. Начало боя: 14 августа японский флот под командованием адмирала Того Хэйхатиро атаковал русскую эскадру в Чемульпском заливе. Ход сражения: Японцы применили тактику окружения и сосредоточенного огня. Русские корабли пытались выйти из порта, но были обстреляны и получили серьезные повреждения."
  },
  six: {
    title: "Цусимское сражение.",
    content: "Дата: 27-28 мая 1905 года. Место: Цусимский против. Цусимское сражение, произошедшее 27-28 мая 1905 года, стало решающим морским сражением Русско-японской войны (1904-1905). Оно произошло в Цусимском проливе между флотами России и Японии и стало одним из самых значительных морских сражений начала XX века. Предыстория: После ряда неудач на суше и в море, Россия стремилась восстановить свои позиции в войне. Русский Балтийский флот, под командованием адмирала Зиновия Рожественского, был отправлен из Балтийского моря через Суэцкий канал в Тихий океан, чтобы соединиться с Тихоокеанским флотом и противостоять японскому флоту. Однако путь был долгим и сложным, и к моменту прибытия в район боевых действий русские силы оказались измотанными. Ход сражения: Японский флот, под командованием адмирала Хейхатиро Того, состоял из более современных кораблей и имел преимущество в тактике и организации. В ночь на 27 мая японцы обнаружили русские корабли и начали атаку. Сражение началось утром 27 мая. Японские силы использовали свою маневренность и превосходство в артиллерии для того, чтобы атаковать русские корабли. Русский флот оказался не готов к такому столкновению: многие корабли были устаревшими, а командование страдало от недостатка координации."
  },
  seven: {
    title: "Морской бой в Корейском проливе.", 
    content: "Дата: 14 августа, 1904 год. Место: Корейский пролив. Морской бой в Корейском проливе, также известный как сражение у Чемульпо, произошел 14 августа 1904 года и стал одним из первых крупных морских сражений Русско-японской войны. Это сражение продемонстрировало стратегическую важность морского контроля в конфликте и стало предвестником дальнейших боевых действий на море. Ход боя: 14 августа 1904 года японский флот под командованием адмирала Хэйхатиро Того попытался перехватить русские корабли, которые двигались из Порт-Артура к Владивостоку. Русский флот под командованием контр-адмирала Витгефта пытался прорваться через Корейский пролив, чтобы соединиться с другими силами. В ходе боя японские корабли использовали преимущество в скорости и манёвренности, а также более современное вооружение. Русские корабли, несмотря на упорное сопротивление, понесли значительные потери. Итог:  Русский флот был вынужден отступить к Владивостоку, потеряв несколько кораблей и лишившись возможности эффективно контролировать морские пути в регионе. Это сражение стало одним из этапов постепенного доминирования Японии на море в ходе войны."
  },
  eight: {
    title: "Бои на подступах к Ляояну.",
    content: "Дата: с 24 по 26 августа 1904 года. Место: Ляоян. Бои на подступах к Ляояну, произошедшие с 24 по 26 августа 1904 года, были частью Русско-японской войны (1904-1905) и представляли собой важный этап в ходе военных действий на Дальнем Востоке. Эти сражения происходили в контексте стремления Японии захватить стратегически важный город Ляоян (ныне Ляонин, Китай), который был ключевым пунктом для дальнейшего продвижения японских войск в Маньчжурии. Предыстория: После успешного начала войны и захвата Порт-Артура японские войска начали наступление на север, стремясь к Ляояну. Русская армия, в свою очередь, пыталась остановить японское наступление и защитить свои позиции. Ход боёв: Сражения на подступах к Ляояну включали несколько крупных столкновений между русскими и японскими войсками. Японская армия, обладая превосходством в маневренности и тактике, смогла эффективно использовать свои силы для окружения и атаки русских позиций. Русские войска, хотя и имели численное преимущество, страдали от недостатка координации и плохой организации. Результаты: В результате боёв японские войска смогли добиться значительных успехов и занять стратегически важные позиции вокруг Ляояна. Это сражение стало одним из первых крупных поражений русской армии в ходе войны и продемонстрировало эффективность японской тактики."
  }
};

planes.forEach(plane => {
  plane.addEventListener('mouseenter', () => {
    const key = plane.getAttribute('data-info');
    const timelineNode = document.querySelector(`.timeline-node[data-target="${key}"]`);
        plane.classList.add('hover-highlight');
    
        if (timelineNode) {
      timelineNode.classList.add('highlighted-date');
      
      timelineNode.scrollIntoView({ 
        behavior: 'smooth', 
        block: 'nearest',
        inline: 'center'
      });
    }
  });

  plane.addEventListener('mouseleave', () => {
    const key = plane.getAttribute('data-info');
    const timelineNode = document.querySelector(`.timeline-node[data-target="${key}"]`);
    
    plane.classList.remove('hover-highlight');
    if (timelineNode) {
      timelineNode.classList.remove('highlighted-date');
    }
  });

  plane.addEventListener('click', () => {
  });
});
   
timelineNodes.forEach(node => {
  node.addEventListener('mouseenter', () => {
    const key = node.getAttribute('data-target');
    const plane = document.querySelector(`.plane[data-info="${key}"]`);
    
    node.classList.add('hover-active');
    
    if (plane) {
      plane.classList.add('highlighted');
    }
  });

  node.addEventListener('mouseleave', () => {
    const key = node.getAttribute('data-target');
    const plane = document.querySelector(`.plane[data-info="${key}"]`);
    
    node.classList.remove('hover-active');
    if (plane) {
      plane.classList.remove('highlighted');
    }
  });

  node.addEventListener('click', () => {
  });
});


closePanelBtn.addEventListener('click', () => {
  infoPanel.style.display = 'none';
  planes.forEach(p => p.classList.remove('active'));
  timelineNodes.forEach(n => n.classList.remove('active'));
});

timelineNodes.forEach(node => {
  const planePreview = document.createElement('div');
  planePreview.className = 'plane-preview';
  document.body.appendChild(planePreview);

  node.addEventListener('mouseenter', () => {
    const key = node.getAttribute('data-target');
    const plane = document.querySelector(`.plane[data-info="${key}"]`);
    
    if (plane) {
      const rect = plane.getBoundingClientRect();
      planePreview.style.display = 'block';
      planePreview.style.left = `${rect.left}px`;
      planePreview.style.top = `${rect.top}px`;
      planePreview.style.width = `${rect.width}px`;
      planePreview.style.height = `${rect.height}px`;
    }
  });

  node.addEventListener('mouseleave', () => {
    planePreview.style.display = 'none';
  });

  node.addEventListener('click', () => {
    const key = node.getAttribute('data-target');
    const plane = document.querySelector(`.plane[data-info="${key}"]`);
    const info = infoDatabase[key];

    planes.forEach(p => p.classList.remove('active'));
    timelineNodes.forEach(n => n.classList.remove('active'));

    if (plane && info) {
      plane.classList.add('active');
      node.classList.add('active');
      
      plane.scrollIntoView({ behavior: 'smooth', block: 'center' });
      
      panelTitle.textContent = info.title;
      panelContent.textContent = info.content;
      infoPanel.style.display = 'flex';

document.addEventListener('click', (event) => {
  const isClickInsidePanel = infoPanel.contains(event.target);
  const isClickOnPlane = Array.from(planes).some(plane => plane.contains(event.target));
  const isClickOnTimelineNode = Array.from(timelineNodes).some(node => node.contains(event.target));
  
  if (infoPanel.style.display === 'flex' && 
      !isClickInsidePanel && 
      !isClickOnPlane && 
      !isClickOnTimelineNode) {
    closePanel();
  }
});

function closePanel() {
  infoPanel.style.display = 'none';

  planes.forEach(p => p.classList.remove('active', 'hover-highlight'));
  timelineNodes.forEach(n => n.classList.remove('active', 'highlighted-date'));
}

closePanelBtn.addEventListener('click', closePanel);

function openPanel() {
  infoPanel.style.display = 'flex';
  document.body.classList.add('side-panel-open');
}

    }
  });
});

</script>

</body>
</html>